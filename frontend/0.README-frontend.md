# 0.README-frontend

## 1. Overview

The `frontend` module is a Next.js application that provides the user interface for the PREGSAFE project. It is built with React, TypeScript, and Tailwind CSS for styling. The primary goal of the frontend is to offer a clean, intuitive, and responsive interface for users to input patient data, receive predictions, and view historical prediction data.

## 2. Folder Structure

```frontend
frontend/
│
├── public/                   # Static assets
├── src/                      # Source code
│   ├── app/                  # Next.js App Router
│   │   ├── (dashboard)/      # Dashboard layout and pages
│   │   │   ├── history/
│   │   │   │   └── page.tsx  # History page
│   │   │   └── page.tsx      # Main dashboard page
│   │   └── layout.tsx        # Root layout
│   ├── components/           # Reusable React components
│   │   ├── ui/               # UI components (e.g., Button, Card)
│   │   └── DashboardLayout.tsx # Main dashboard layout
│   ├── context/              # React context for state management
│   │   └── PredictionContext.tsx # Context for prediction history
│   └── lib/                  # Helper functions and utilities
│       └── api.ts            # Functions for interacting with the backend API
│
├── next.config.ts            # Next.js configuration
├── package.json              # Project dependencies and scripts
└── tailwind.config.ts        # Tailwind CSS configuration
```

## 3. Core Logic and Design Reasoning

The frontend is built using the Next.js App Router. The main prediction page (`page.tsx`) provides two distinct user experiences:

1. **Simple Prediction:** A primary button allows users to get a prediction using a single, pre-determined "Optimal Model" (currently the CTGAN model).
2. **Advanced Prediction:** A collapsible "Advanced Options" section reveals two dropdown menus. These allow the user to select a specific combination of a Synthetic Data Generation (SDG) method and a Machine Learning Algorithm.

**New Input Features:**

* **Gestational Age:** Now accepts input in **Weeks** (float) for easier clinical use.
* **ART Conception:** Added a checkbox to indicate Assisted Reproductive Technology usage.
* **Auto-BMI:** Automatically calculates BMI in real-time based on Height and Weight inputs.
* **Safety:** Real-time yellow warning alerts for out-of-range inputs (e.g., Maternal Age < 15).

State management for the prediction history is handled globally using React Context (`PredictionContext.tsx`).

## 4. File Breakdown

* **`package.json`**: Defines the project's dependencies and scripts.
* **`next.config.ts`**: Configuration file for Next.js.
* **`src/app/(dashboard)/page.tsx`**: The main page of the application. Contains the core UI logic, including the new Weeks/BMI/ART inputs and the "Advanced Options" section.
* **`src/lib/api.ts`**: Contains the functions for making API calls to the backend. This now includes `predictCtgan` for the simple prediction and `predictAdvanced` for the advanced, multi-model predictions.
* **`src/components/ui/dropdown.tsx`**: A reusable dropdown component (based on Radix UI) used for the model selection menus in the "Advanced Options" section.
* **`src/components/PredictionHistoryCard.tsx`**: Redesigned component for displaying past predictions. Now features a **split-row layout** for better readability on mobile devices.
* **`src/context/PredictionContext.tsx`**: A React Context provider that manages the global state of the prediction history.

## 5. Setup and Installation

### Windows (PowerShell)

```powershell
# 1. Navigate to the frontend directory
cd frontend

# 2. Install the required dependencies
npm install
```

### Linux (bash)

```bash
# 1. Navigate to the frontend directory
cd frontend

# 2. Install the required dependencies
npm install
```

## 6. Running the Module

### Windows

```powershell
# Run the Next.js development server
npm run dev
```

### Linux

```bash
# Run the Next.js development server
npm run dev
```

## 7. Common Issues & Fixes

* **API connection issues**: Ensure that the backend server is running and that the `NEXT_PUBLIC_API_BASE_URL` environment variable in `.env.local` is set to the correct URL of the backend API.
* **Dependency issues**: If you encounter any issues with the dependencies, try deleting the `node_modules` directory and the `package-lock.json` file, and then run `npm install` again.

## 8. Notes for Integration

The frontend communicates with the backend through a RESTful API. The API base URL is configured in the `.env.local` file. The `src/lib/api.ts` file contains all the functions for making API calls to the backend.
